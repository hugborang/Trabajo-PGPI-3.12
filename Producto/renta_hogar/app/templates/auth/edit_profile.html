{% extends "headers/login_header.html" %}

{% load static %}

{% block style_css %}
<link rel="stylesheet" href="{% static 'css/login_header.css' %}">
<link rel="stylesheet" href="{% static 'css/edit_profile.css' %}">
{% endblock %}


{% block encabezado %}
{% endblock %}

{% block contenido %}



<div class="content-edit-profile">
    <h1>Edita tus datos</h1>
    <form id="formulario" method="post" action="">
        {% csrf_token %}
        {{ form.as_p }}
        <p><input type="submit" value="Actualiza" /></p>
    </form>



<button type="button" class="btn btn-danger" onclick="openModal()">Eliminar cuenta</button>

<!-- Modal de confirmación -->
<div id="deleteAccountModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Confirmar eliminación</h2>
        <p>¿Estás seguro de que deseas eliminar tu cuenta? Esta acción no se puede deshacer.</p>
        <form method="post" action="{% url 'delete_account' %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Sí, eliminar cuenta</button>
            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
        </form>
    </div>
</div>

<script>
    // Función para abrir el modal
    function openModal() {
        document.getElementById("deleteAccountModal").style.display = "block";
    }

    // Función para cerrar el modal
    function closeModal() {
        document.getElementById("deleteAccountModal").style.display = "none";
    }

    // Cierra el modal si el usuario hace clic fuera del contenido
    window.onclick = function(event) {
        const modal = document.getElementById("deleteAccountModal");
        if (event.target == modal) {
            closeModal();
        }
    }
</script>


    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

</div>



{% endblock %}